/*
 Copyright (c) 2012, Vladimir Agafonkin
 Simplify.js is a high-performance polyline simplification library.
 http://mourner.github.com/simplify-js/
*/
(function(a,b){function c(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d}function d(a,b,c){var d=b.x,e=b.y,f=c.x-d,g=c.y-e,h;if(f!==0||g!==0)h=((a.x-d)*f+(a.y-e)*g)/(f*f+g*g),h>1?(d=c.x,e=c.y):h>0&&(d+=f*h,e+=g*h);return f=a.x-d,g=a.y-e,f*f+g*g}function e(a,b){var d,e=a.length,f,g=c,h=a[0],i=[h];for(d=1;d<e;d++)f=a[d],g(f,h)>b&&(i.push(f),h=f);return h!==f&&i.push(f),i}function f(a,b,c,e,f){var g,h,i,j=d,k,l=[],m=[];while(f){g=0;for(h=e+1;h<f;h++)i=j(a[h],a[e],a[f]),i>g&&(k=h,g=i);g>c&&(b[k]=1,l.push(e),m.push(k),l.push(k),m.push(f)),e=l.pop(),f=m.pop()}}function g(a,c){var d=a.length,e=typeof Uint8Array!=b+""?Uint8Array:Array,g=new e(d),h,i=[];g[0]=g[d-1]=1,f(a,g,c,0,d-1);for(h=0;h<d;h++)g[h]&&i.push(a[h]);return i}"use strict";var h=typeof exports!=b+""?exports:a;h.simplify=function(a,c,d){c=c!==b?c:1,d=d!==b?d:!1;var f=c*c;return d||(a=e(a,f)),a=g(a,f),a}})(this)